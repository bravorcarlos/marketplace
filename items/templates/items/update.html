{% extends 'core/base.html' %}
{% load static %}
{% block title %}Editar producto{% endblock %}
{% block content %}
<main role="main">
    <div class="container">
        <div class="row mt-3 mb-5">
            <div class="col-md-9 mx-auto">
                {% if 'ok' in request.GET %}
                    <div class="alert alert-success  alert-dismissible fade show" role="alert">
                        Producto actualizado.
                        <a href="{% url 'items:detail' item.id %}">Ver detalles</a>
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endif %}
                <form action="" method="post" enctype="multipart/form-data">{% csrf_token %}
                    <div class="row">
                        <!-- Previa del avatar -->
                        <div class="col-md-2 mb-3 text-center">
                            {% if item.image %}
                                <img src="{{ item.image.url }}" class="img-fluid">
                            {% else %}
                                <img src="{% static 'items/img/no-image.jpg' %}" class="img-fluid">
                            {% endif %}
                        </div>
                        <!-- Formulario -->
                        <div class="col-md-10 mb-3">
                            <h3>Editar producto</h3>
                            {{ form.name }}
                            {{ form.description }}
                            {{ form.price }}
                            <div class="mt-3">
                              <label for="id_image" class="form-label">Imágen</label>
                              <input type="file" name="image" class="form-control" id="id_image">
                            </div>
                            <div class="form-check form-switch mt-3">
                                {{ form.availability }}
                                <label class="form-check-label" for="id_availability">Disponibilidad</label>
                            </div>
                            <div class="mt-3">
                              <label class="form-check-label" for="id_category">Categoría</label>               
                              {{ form.category }}
                            </div>
                            <input type="submit" class="btn btn-custom btn-block mt-3" value="Actualizar">
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</main>
{% endblock %}